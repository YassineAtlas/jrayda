<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Suivi semis</title>
  <link rel="stylesheet" href="style.css?v=20260224-15">
</head>
<body>
  <header class="site-header">
    <div class="site-nav">
      <h1><a href="index.html">Mes plantes</a></h1>
      <a class="family-link" href="famille.html">Espace famille</a>
    </div>
  </header>

  <main class="family-container">
    <section class="panel" id="semis-detail-panel">
      <h2>Semis</h2>
      <div id="semis-detail"></div>
    </section>

    <section class="panel" id="semis-updates-panel">
      <div class="member-header">
        <h2>Suivi hebdomadaire</h2>
      </div>

      <form id="update-form" class="seed-form hidden" hidden>
        <label for="update-mode">Mode de suivi</label>
        <select id="update-mode" required>
          <option value="current_date">Date actuelle</option>
          <option value="custom_date">Choisir une date</option>
          <option value="custom_week">Choisir une semaine</option>
        </select>

        <div id="update-date-wrap" class="hidden" hidden>
          <label for="update-date">Date du suivi</label>
          <input type="date" id="update-date">
        </div>

        <div id="update-week-wrap" class="hidden" hidden>
          <label for="update-week">Semaine du suivi</label>
          <input type="number" id="update-week" min="1" step="1">
        </div>

        <label for="update-note">Commentaire</label>
        <textarea id="update-note" rows="4" placeholder="Observations, arrosage, etat des plants..."></textarea>

        <label for="update-photo">Photo depuis fichiers (optionnel)</label>
        <input type="file" id="update-photo" accept="image/*">
        <p id="update-photo-selected" class="file-selection-indicator">Aucune photo selectionnee.</p>

        <button type="submit">Ajouter au suivi</button>
      </form>

      <div id="update-progress" class="seed-progress hidden" hidden aria-live="polite">
        <div class="seed-progress-head">
          <span id="update-progress-label">Enregistrement du suivi...</span>
          <span id="update-progress-percent">0%</span>
        </div>
        <progress id="update-progress-bar" max="100" value="0">0%</progress>
      </div>

      <p id="update-message" class="status-message"></p>
      <div id="updates-list" class="updates-list"></div>
    </section>

    <section class="panel" id="semis-timeline-panel">
      <h2>Timeline complete</h2>
      <div id="semis-timeline">
        <p>Chargement de la timeline...</p>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js?v=20260221-6"></script>
  <script src="semis.js?v=20260224-26"></script>
</body>
</html>
